clear; close all; clc;
f = @(x,y) sin(x)+y.^3;

x = linspace(-2*pi,2*pi,1e1);
y = linspace(-2*pi,2*pi,1e1);

[a,b] = meshgrid(x,y);
x2 = zeros(numel(a),1);
y2 = zeros(numel(a),1);

for i = 1:numel(a)
    x2(i) = a(i);
    y2(i) = b(i);
end

z = f(x2,y2);

A = [x2 y2 z];

%save('testdata.dat','A','-ascii')

fileID = fopen('testdata.dat','w')
formatSpec1 = '%f %f %f \n';
fprintf(fileID,formatSpec1,A(1:3)'
fprintf(fileID,formatSpec2,A(3:end)')
fclose('all');
